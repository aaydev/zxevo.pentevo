#==============================================================================
# z80.a
#==============================================================================

UNREAL_FLAGS =	-DUSE_SND_EXTERNAL_BUFFER

#==============================================================================

OPT =		-Ofast

#------------------------------------------------------------------------------
# NATIVE
#------------------------------------------------------------------------------
TARGET =	-m32		\
		-march=native	\
		-mtune=native	\
		-mfpmath=both	\
		-DMOD_SSE2
#------------------------------------------------------------------------------
# NATIVE x64
#------------------------------------------------------------------------------
#TARGET =	-m64		\
#		-march=native	\
#		-mtune=native	\
#		-mfpmath=both	\
#		-DMOD_SSE2
#------------------------------------------------------------------------------
# P4
#------------------------------------------------------------------------------
#TARGET =	-m32		\
#		-march=pentium4	\
#		-mtune=pentium4	\
#		-mfpmath=both	\
#		-DMOD_SSE2
#------------------------------------------------------------------------------
# P0 - ultra minimal
#------------------------------------------------------------------------------
#TARGET =	-m32		\
#		-march=i386	\
#		-mtune=i386	\
#		-mfpmath=387
#==============================================================================




#==============================================================================
OBJ_LIST =	daa_tabs.o		\
		op_cb.o			\
		op_dd.o			\
		op_ddcb.o		\
		op_ed.o			\
		op_fd.o			\
		op_noprefix.o		\
		tables.o
#==============================================================================




#==============================================================================
z80.a:		$(OBJ_LIST)

	ar crf z80.a							\
		$(OBJ_LIST)
#==============================================================================
	
	

	
#==============================================================================	
daa_tabs.o:	daa_tabs.cpp						\
			../z80/daa_tabs.h

	g++ daa_tabs.cpp	-o daa_tabs.o				\
		-c -pipe $(OPT) $(TARGET) \
		$(UNREAL_FLAGS)
	
#==============================================================================
op_cb.o:	op_cb.cpp						\
			../z80/defs.h					\
				../sysdefs.h				\
			../z80/op_noprefix.h				\
			../z80/tables.h

	g++ op_cb.cpp		-o op_cb.o				\
		-c -pipe $(OPT) $(TARGET) \
		$(UNREAL_FLAGS)
	
#==============================================================================
op_dd.o:	op_dd.cpp						\
			../z80/defs.h					\
				../sysdefs.h				\
			../z80/tables.h					\
			../z80/op_noprefix.h				\
			../z80/op_dd.h

	g++ op_dd.cpp		-o op_dd.o				\
		-c -pipe $(OPT) $(TARGET) \
		$(UNREAL_FLAGS)
	
#==============================================================================
op_ddcb.o:	op_ddcb.cpp						\
			../z80/defs.h					\
				../sysdefs.h				\
			../z80/op_noprefix.h				\
			../z80/tables.h					\
			../z80/op_ed.h					\
			../z80/op_dd.h					\
			../z80/op_fd.h

	g++ op_ddcb.cpp		-o op_ddcb.o				\
		-c -pipe $(OPT) $(TARGET) \
		$(UNREAL_FLAGS)
	
#==============================================================================
op_ed.o:	op_ed.cpp						\
			../z80/defs.h					\
				../sysdefs.h				\
			../z80/tables.h					\
			../z80/op_noprefix.h				\
			../z80/op_ed.h

	g++ op_ed.cpp		-o op_ed.o				\
		-c -pipe $(OPT) $(TARGET) \
		$(UNREAL_FLAGS)
	
#==============================================================================
op_fd.o:	op_fd.cpp						\
			../z80/defs.h					\
				../sysdefs.h				\
			../z80/tables.h					\
			../z80/op_noprefix.h				\
			../z80/op_fd.h

	g++ op_fd.cpp		-o op_fd.o				\
		-c -pipe $(OPT) $(TARGET) \
		$(UNREAL_FLAGS)
	
#==============================================================================
op_noprefix.o:	op_noprefix.cpp						\
			../z80/defs.h					\
				../sysdefs.h				\
			../z80/tables.h					\
			../z80/op_system.h				\
			../z80/op_noprefix.h				\
			../z80/daa_tabs.h

	g++ op_noprefix.cpp	-o op_noprefix.o			\
		-c -pipe $(OPT) $(TARGET) \
		$(UNREAL_FLAGS)
	
#==============================================================================
tables.o:	tables.cpp						\
			../z80/defs.h					\
				../sysdefs.h				\
			../z80/tables.h
			
	g++ tables.cpp		-o tables.o				\
		-c -pipe $(OPT) $(TARGET) \
		$(UNREAL_FLAGS)
	
#==============================================================================

